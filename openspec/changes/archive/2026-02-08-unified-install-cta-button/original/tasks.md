# 任务清单: 统一安装入口为单一 CTA 按钮

## 1. 准备工作
- [ ] 1.1 阅读 `proposal.md` 了解变更目标和范围
- [ ] 1.2 阅读 `specs/astro-site/spec.md` 理解技术要求
- [ ] 1.3 检查 Desktop 页面 (`/desktop/index.astro`) 确认其包含完整安装信息

## 2. 导航配置更新
- [ ] 2.1 更新 `src/config/navigation.ts`
  - [ ] 2.1.1 移除 `navLinks` 数组中的"安装指南"链接对象
  - [ ] 2.1.2 移除 `navLinks` 数组中的"桌面客户端"链接对象（与 CTA 按钮功能重复）
  - [ ] 2.1.3 验证配置语法正确性
  - [ ] 2.1.4 注意: 此更改会同时影响首页和 Starlight Docs 的顶部导航（共享数据源）

## 3. CTA 按钮组件实现
- [ ] 3.1 创建 `src/components/home/InstallCTAButton.tsx` 组件
  - [ ] 3.1.1 定义 TypeScript Props 接口
  - [ ] 3.1.2 实现按钮 JSX 结构 (包括图标)
  - [ ] 3.1.3 添加 Framer Motion 动画
  - [ ] 3.1.4 集成 `withBasePath` 工具函数
  - [ ] 3.1.5 添加可访问性属性 (`aria-label`, role)
- [ ] 3.2 创建 `src/components/home/InstallCTAButton.module.css` 样式文件
  - [ ] 3.2.1 定义 `.install-cta` 基础样式类
  - [ ] 3.2.2 定义渐变背景和发光效果
  - [ ] 3.2.3 定义悬停和焦点状态样式
  - [ ] 3.2.4 定义主题适配样式 (亮色/暗色/新年)
  - [ ] 3.2.5 定义响应式断点样式

## 4. 导航栏集成
- [ ] 4.1 更新 `src/components/home/Navbar.tsx`
  - [ ] 4.1.1 导入 `InstallCTAButton` 组件
  - [ ] 4.1.2 在导航栏合适位置添加 CTA 按钮
  - [ ] 4.1.3 确保移动端菜单中正确显示按钮
  - [ ] 4.1.4 测试不同屏幕尺寸下的布局

## 5. 样式系统更新
- [ ] 5.1 更新 `src/styles/homepage.css`
  - [ ] 5.1.1 添加 CTA 按钮专用 CSS 变量
  - [ ] 5.1.2 为每个主题定义 `--shadow-glow` 变量:
    - [ ] 5.1.2.1 亮色主题发光效果 (蓝色/青色系)
    - [ ] 5.1.2.2 暗色主题发光效果 (增强可见度)
    - [ ] 5.1.2.3 农历新年主题发光效果 (红色/金色系)
  - [ ] 5.1.3 确保主题变量在所有主题下正确工作
  - [ ] 5.1.4 验证动画性能使用 `transform` 和 `opacity`
  - [ ] 5.1.5 确保新增主题时可以轻松添加对应的发光效果变量

## 7. TypeScript 类型检查
- [ ] 7.1 运行 `npm run typecheck`
- [ ] 7.2 修复所有类型错误
- [ ] 7.3 确保没有 `any` 类型

## 6. 本地测试
- [ ] 6.1 启动开发服务器 `npm run dev`
- [ ] 6.2 测试首页导航栏 CTA 按钮功能和样式
  - [ ] 6.2.1 验证按钮在所有页面显示
  - [ ] 6.2.2 测试移动端菜单中的按钮
  - [ ] 6.2.3 验证响应式布局
  - [ ] 6.2.4 验证按钮点击正确导航至 `/desktop`
  - [ ] 6.2.5 测试悬停和焦点状态
  - [ ] 6.2.6 测试主题切换和发光效果:
    - [ ] 6.2.6.1 验证亮色主题下发光效果协调性
    - [ ] 6.2.6.2 验证暗色主题下发光效果可见度
    - [ ] 6.2.6.3 验证农历新年主题下发光效果协调性
    - [ ] 6.2.6.4 确认发光效果不影响文字可读性
- [ ] 6.3 测试 Starlight Docs 顶部导航变更
  - [ ] 6.3.1 验证 Starlight Docs 顶部导航中不再显示"安装指南"和"桌面客户端"链接
  - [ ] 6.3.2 验证文档页面导航功能正常
  - [ ] 6.3.3 确认 Starlight Docs 侧边栏（sidebar）保持不变，不受影响
- [ ] 6.4 测试可访问性
  - [ ] 6.4.1 测试键盘导航 (Tab 键)
  - [ ] 6.4.2 验证焦点指示器可见性
  - [ ] 6.4.3 测试屏幕阅读器兼容性

## 7. 浏览器兼容性测试
- [ ] 9.1 在 Chrome 中测试
- [ ] 9.2 在 Firefox 中测试
- [ ] 9.3 在 Safari 中测试
- [ ] 9.4 在 Edge 中测试

## 7. 性能验证
- [ ] 7.1 验证动画不影响页面加载性能
- [ ] 7.2 确认 Framer Motion 仅播放入场动画一次
- [ ] 7.3 检查移动端滚动性能

## 8. Base Path 兼容性测试
- [ ] 8.1 测试根部署模式 (`npm run dev:root`)
- [ ] 8.2 测试子路径部署模式 (`npm run dev:site`)
- [ ] 8.3 验证两种模式下按钮链接均正常工作

## 9. 构建验证
- [ ] 9.1 运行 `npm run build`
- [ ] 9.2 验证构建成功无错误
- [ ] 9.3 检查构建输出中包含新组件

## 10. 代码审查准备
- [ ] 10.1 自查代码是否符合项目规范
- [ ] 10.2 添加必要的代码注释
- [ ] 10.3 更新相关文档 (如需要)

## 11. 提交和合并
- [ ] 11.1 提交代码变更
- [ ] 11.2 创建/更新 Pull Request
- [ ] 11.3 等待代码审查和合并
