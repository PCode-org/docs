## MODIFIED Requirements

### Requirement: 主题切换功能

系统 SHALL 提供用户在亮色、暗色和农历新年主题之间切换的功能，以支持不同环境光线下的阅读需求和用户个性化偏好。主题切换按钮 SHALL 显示代表**当前主题状态**的图标，而非切换目标。

#### Scenario: 用户通过导航栏按钮切换主题

- **WHEN** 用户点击导航栏右侧的主题切换按钮
- **THEN** 系统应立即切换当前主题（亮色 → 暗色 → 农历新年 → 亮色循环）
- **AND** 页面所有元素应平滑过渡到新主题的配色方案
- **AND** 主题切换按钮图标应更新为对应状态：
  - 亮色主题显示太阳图标 ☀️
  - 暗色主题显示月亮图标 🌙
  - 农历新年主题显示灯笼图标 🏮
- **AND** 切换过程中应显示流畅的动画（300ms）
- **AND** 按钮的 `aria-label` 和 `title` 应继续描述"切换到"的目标主题

#### Scenario: 主题图标与状态一致

- **WHEN** 系统应用某个主题
- **THEN** 主题切换按钮应显示代表**当前主题状态**的图标
- **AND** 图标映射关系应为：
  - `data-theme="light"` → 显示太阳图标
  - `data-theme="dark"` → 显示月亮图标
  - `data-theme="lunar-new-year"` → 显示灯笼图标

#### Scenario: 用户刷新页面后主题保持不变

- **WHEN** 用户已选择某个主题并刷新页面或重新访问站点
- **THEN** 系统应自动应用用户之前选择的主题
- **AND** 页面加载时不应出现主题闪烁（FOUC）
- **AND** 主题切换按钮图标应正确反映当前主题状态
- **AND** 用户无需重新选择主题

#### Scenario: 首次访问默认使用智能主题

- **WHEN** 用户首次访问文档站点
- **AND** 用户浏览器 localStorage 中无保存的主题偏好
- **THEN** 系统应应用智能默认主题（农历新年期间使用节日主题，否则使用系统偏好）
- **AND** 主题切换按钮图标应正确反映初始主题状态

#### Scenario: 移动端用户通过菜单切换主题

- **WHEN** 移动端用户点击汉堡菜单并选择主题选项
- **THEN** 系统应切换到选中的主题
- **AND** 主题切换按钮图标应更新为新的当前状态
- **AND** 侧边栏菜单应自动关闭
- **AND** 页面应立即应用新主题
