# Project Context

## Purpose
PCode Documentation is a comprehensive documentation site built with Docusaurus 3.x, designed to provide user guides, feature documentation, and technical specifications for the PCode project. The site supports bilingual content (English and Simplified Chinese) and serves as the primary source of truth for PCode users and contributors.

## Tech Stack
- **Docusaurus 3.x** - Static site generator and documentation framework
- **React 18.2** - UI library for custom components
- **TypeScript 5.3** - Type-safe configuration and component development
- **MDX (MDX.js 3.0)** - Enhanced markdown with JSX support
- **Node.js >=18.0** - Runtime environment
- **Prism** - Syntax highlighting for code blocks (supports: bash, csharp, fsharp, powershell)

## Project Conventions

### Code Style
- **TypeScript**: Use strict mode for all TypeScript files
- **File Naming**: Use kebab-case for markdown files (e.g., `session-management.md`)
- **Component Naming**: Use PascalCase for React components
- **CSS**: Use CSS custom properties (variables) defined in `src/css/custom.css`
- **Frontmatter**: All markdown documents must include `title` and `description` in frontmatter

### Architecture Patterns

**Documentation Structure**
- `docs/` - Main documentation content (English/default locale)
- `i18n/zh-CN/` - Chinese translations
- `blog/` - Blog posts with date-based naming (`YYYY-MM-DD-title.md`)
- `static/` - Static assets (images, favicons)
- `src/` - Custom React components and styles

**Sidebar Organization**
- Use `sidebars.ts` for navigation configuration
- Categories use `_category_.json` for metadata (label, position, collapsible)
- Autogenerated subcategories using `type: 'autogenerated'`
- Generated index pages for category landing pages

**Internationalization**
- Default locale: English (`en`)
- Supported locales: English (`en`), Simplified Chinese (`zh-CN`)
- Translation files in `i18n/{locale}/docusaurus-plugin-content-docs/current/`
- Use `npm run write-translations -- --locale <locale>` to extract translatable content

### Testing Strategy
- **Local Development**: Always test with `npm start` before committing
- **Production Build**: Validate with `npm run build` to ensure no build errors
- **Type Checking**: Run `npm run typecheck` to verify TypeScript correctness
- **Link Validation**: Set `onBrokenLinks: 'throw'` in config to catch broken links

### Git Workflow
- **Main Branch**: `main`
- **Feature Branches**: Create from `main`, descriptive names (e.g., `add-session-docs`)
- **Commit Conventions**: Clear, descriptive messages in imperative mood
- **OpenSpec Integration**: Use OpenSpec for significant changes (see openspec/AGENTS.md)
- **PR Process**: All changes go through pull requests with local testing required

## Domain Context

**PCode** appears to be a code-related tool/application with the following key feature areas:
- **Session Management**: Managing sessions, concurrency, and session details
- **Conversation Features**: Message rendering, tool calls, todo tasks, view modes
- **Project Management**: Project lists, details, and creation
- **OpenSpec Integration**: Proposal creation, diagrams, annotations
- **Statistics & Achievements**: Usage statistics, efficiency ratings
- **Configuration**: Config panel, project settings, notification settings
- **User Experience**: Themes, languages, appearance customization

## Important Constraints
- **Node.js Version**: Requires Node.js >=18.0 (defined in package.json engines)
- **Build Compatibility**: All changes must pass `npm run build` without errors
- **Type Safety**: TypeScript must pass `tsc --noEmit` without errors
- **Link Integrity**: Broken links cause build failures (strict mode enabled)
- **OpenSpec Compliance**: Significant changes require OpenSpec proposals (see AGENTS.md)

## External Dependencies
- **GitHub**: Repository hosting (https://github.com/pcode/pcode-docs)
- **Docusaurus Framework**: @docusaurus/core, @docusaurus/preset-classic, @docusaurus/theme-classic
- **React Ecosystem**: react, react-dom, @mdx-js/react
- **Utilities**: clsx (className utilities), prism-react-renderer (syntax highlighting)

## Documentation Content Areas

### Installation Guides
- Setup and configuration instructions

### Feature Guides
- Session Management (session-list, session-details, session-chat, concurrency)
- Conversation Features (message-rendering, tool-calls, todo-tasks, view-modes)
- Project Management (project-list, project-details, creating-projects)
- OpenSpec Proposals (overview, creating-proposals, diagrams, annotations)
- Statistics & Achievements (usage-statistics, efficiency-rating)
- Configuration (config-panel, project-settings, notification-settings)

### User Guide
- Appearance (themes, languages)
- Settings (overview)

## OpenSpec Integration

This project uses OpenSpec for spec-driven development. Key points:
- Proposals are managed in `openspec/changes/`
- Specifications live in `openspec/specs/`
- Archive of completed changes in `openspec/changes/archive/`
- See `openspec/AGENTS.md` for detailed workflow instructions
- Always check `openspec list` and `openspec list --specs` before starting work

## Development Scripts

```bash
npm start              # Start development server (localhost:3000)
npm run build          # Create production build
npm run serve          # Serve production build locally
npm run typecheck      # TypeScript type checking
npm run write-translations  # Extract translatable content
npm run clear          # Clear Docusaurus cache
```

## Deployment Considerations
- Static site deployment compatible (GitHub Pages, Netlify, Vercel)
- Build output directory: `build/`
- All locales are built during `npm run build`
