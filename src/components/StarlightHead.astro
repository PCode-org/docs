---
/**
 * Starlight 自定义 Head 组件
 * 使用 astro-seo 插件添加完整的 SEO meta 标签
 */
import { SEO } from 'astro-seo';

// 站点默认信息
const siteTitle = 'Hagicode Docs - 智能 · 便捷 · 有趣的 AI 编码助手';
const siteDescription = 'Hagicode 项目文档 - 用 AI 重新定义代码开发体验。OpenSpec 工作流、多线程会话管理、成就系统,让编码更高效、更有趣';

// 构建完整的 URL
const url = new URL(Astro.url.pathname, Astro.site);
const canonicalUrl = url.href;

// 完整的图片 URL
const baseUrl = import.meta.env.VITE_SITE_BASE || '';
const fullImageUrl = `https://hagicode-org.github.io${baseUrl}/img/docusaurus-social-card.jpg`;

// 只对有效页面应用 SEO,跳过404等特殊页面
const isValidPage = Astro.url.pathname !== '/404';
---

{isValidPage && (
  <SEO
    title={siteTitle}
    description={siteDescription}
    canonicalURL={canonicalUrl}
    openGraph={{
      url: canonicalUrl,
      title: siteTitle,
      description: siteDescription,
      images: [
        {
          url: fullImageUrl,
          width: 1200,
          height: 630,
          alt: siteTitle,
        },
      ],
      siteName: 'Hagicode Docs',
      locale: 'zh_CN',
    }}
    twitter={{
      card: 'summary_large_image',
      title: siteTitle,
      description: siteDescription,
      image: fullImageUrl,
    }}
  />
)}
