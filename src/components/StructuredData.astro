---
/**
 * Schema.org 结构化数据组件
 * 为页面添加 JSON-LD 格式的结构化数据
 */

interface StructuredDataProps {
  type: 'WebPage' | 'Article' | 'BlogPosting' | 'Organization';
  data: {
    name?: string;
    headline?: string;
    description: string;
    url?: string;
    datePublished?: string;
    dateModified?: string;
    author?: {
      name: string;
      url?: string;
    };
    image?: string;
    inLanguage?: string;
    publisher?: {
      name: string;
      logo?: string;
    };
  };
  canonicalUrl: string;
}

const { type, data, canonicalUrl } = Astro.props;

// 构建结构化数据对象
const structuredData = {
  '@context': 'https://schema.org',
  '@type': type,
  url: canonicalUrl,
  ...data,
};

// 转换为 JSON 字符串
const jsonLd = JSON.stringify(structuredData);
---

<script type="application/ld+json" set:html={jsonLd} />
